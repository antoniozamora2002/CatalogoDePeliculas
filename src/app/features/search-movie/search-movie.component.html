<div class="min-h-screen bg-gradient-to-b from-gray-900 to-black text-white">
  <!-- Search Header -->
  <div class="bg-gray-900 border-b border-gray-800">
    <div class="container mx-auto px-4 py-8">
      <h1 class="text-3xl md:text-4xl font-bold mb-6">Búsqueda de Películas</h1>

      <!-- Search Bar -->
      <div
        class="flex flex-col sm:flex-row gap-2 max-w-3xl bg-black/30 p-2 rounded-lg backdrop-blur-sm mb-4"
      >
        <input
          type="text"
          [(ngModel)]="searchQuery"
          placeholder="Buscar películas..."
          class="flex-1 px-4 py-3 rounded-md bg-gray-800/80 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
          (keyup.enter)="searchMovies()"
        />
        <button
          (click)="searchMovies()"
          class="px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition flex items-center justify-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-5 h-5"
          >
            <path
              fill-rule="evenodd"
              d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z"
              clip-rule="evenodd"
            />
          </svg>
          Buscar
        </button>
      </div>

      <!-- Current Search Term -->
      @if (searchQuery) {
      <div class="text-gray-400 mb-2">
        Resultados para:
        <span class="text-white font-medium">{{ searchQuery }}</span>
      </div>
      }
    </div>
  </div>

  <div class="container mx-auto px-4 py-8">
    <!-- Results Info -->
    @if (searchResults.results.length > 0) {
    <div
      class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 bg-gray-800/50 rounded-lg p-4"
    >
      <p class="text-gray-300">
        Mostrando
        <span class="font-medium text-white">{{
          searchResults.results.length
        }}</span>
        de
        <span class="font-medium text-white">{{
          searchResults.total_results
        }}</span>
        resultados
      </p>

      <!-- Pagination Controls -->
      <div class="flex items-center gap-2">
        <button
          *ngIf="searchResults.page > 1"
          (click)="changePage(searchResults.page - 1)"
          class="flex items-center gap-1 bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-lg transition-colors"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="w-5 h-5"
          >
            <path
              fill-rule="evenodd"
              d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z"
              clip-rule="evenodd"
            />
          </svg>
          Anterior
        </button>

        <span class="bg-gray-800 px-4 py-2 rounded-lg">
          {{ searchResults.page }} de {{ searchResults.total_pages }}
        </span>

        <button
          *ngIf="searchResults.page < searchResults.total_pages"
          (click)="changePage(searchResults.page + 1)"
          class="flex items-center gap-1 bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-lg transition-colors"
        >
          Siguiente
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="w-5 h-5"
          >
            <path
              fill-rule="evenodd"
              d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>
    </div>
    }

    <!-- Loading State -->
    @if (isLoading) {
    <div class="flex flex-col items-center justify-center py-20">
      <div
        class="w-16 h-16 border-4 border-gray-600 border-t-blue-600 rounded-full animate-spin mb-4"
      ></div>
      <p class="text-gray-400">Buscando películas...</p>
    </div>
    }

    <!-- Movie Grid -->
    @if (!isLoading && searchResults.results.length > 0) {
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"
    >
      @for (movie of searchResults.results; track movie.id) {
      <div
        class="group relative bg-gray-800 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2"
      >
        <!-- Movie Poster -->
        <div class="relative aspect-[2/3]">
          @if (movie.poster_path) {
          <img
            [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
            [alt]="movie.title"
            class="w-full h-full object-cover"
          />
          } @else {
          <div
            class="w-full h-full bg-gray-700 flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-16 h-16 text-gray-500"
            >
              <path
                fill-rule="evenodd"
                d="M1.5 5.625c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v12.75c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 18.375V5.625zm1.5 0v1.5c0 .207.168.375.375.375h1.5a.375.375 0 00.375-.375v-1.5a.375.375 0 00-.375-.375h-1.5A.375.375 0 003 5.625zm16.125-.375a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375h1.5A.375.375 0 0021 7.125v-1.5a.375.375 0 00-.375-.375h-1.5zM21 9.375A.375.375 0 0020.625 9h-1.5a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 00.375-.375v-1.5zm0 3.75a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 00.375-.375v-1.5zm0 3.75a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375h1.5a.375.375 0 00.375-.375v-1.5zM4.875 18.75a.375.375 0 00.375-.375v-1.5a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375h1.5zM3.375 15h1.5a.375.375 0 00.375-.375v-1.5a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.5c0 .207.168.375.375.375zm0-3.75h1.5a.375.375 0 00.375-.375v-1.5A.375.375 0 004.875 9h-1.5A.375.375 0 003 9.375v1.5c0 .207.168.375.375.375z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          }

          <!-- Overlay on hover -->
          <div
            class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4"
          >
            <h3 class="font-bold text-lg mb-1">{{ movie.title }}</h3>
            <p class="text-sm text-gray-300 mb-2">
              {{ movie.release_date | date : "yyyy" }}
            </p>
            <p class="text-sm text-gray-300 line-clamp-3">
              {{ movie.overview }}
            </p>
            <button
              (click)="viewMovieDetails(movie.id)"
              class="mt-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md py-2 transition-colors"
            >
              Ver detalles
            </button>
          </div>

          <!-- Rating Badge -->
          <div
            class="absolute top-2 right-2 bg-black/70 px-2 py-1 rounded-full flex items-center gap-1"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 text-yellow-400"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
              />
            </svg>
            <span>{{ movie.vote_average | number : "1.1-1" }}</span>
          </div>

          <!-- Adult Badge -->
          @if (movie.adult) {
          <div
            class="absolute top-2 left-2 bg-red-600/80 px-2 py-1 rounded-full text-xs font-bold"
          >
            18+
          </div>
          }
        </div>

        <!-- Quick Info (visible by default) -->
        <div class="p-4 group-hover:opacity-0 transition-opacity duration-300">
          <h3 class="font-bold text-lg mb-1 line-clamp-1">{{ movie.title }}</h3>
          <div class="flex justify-between items-center">
            <p class="text-sm text-gray-400">
              {{ movie.release_date | date : "yyyy" }}
            </p>
            <span class="text-xs text-gray-400"
              >{{ movie.vote_count }} votos</span
            >
          </div>
        </div>
      </div>
      }
    </div>
    }

    <!-- Empty State -->
    @if (!isLoading && searchQuery && (!searchResults.results ||
    searchResults.results.length === 0)) {
    <div
      class="bg-gray-800/50 p-12 rounded-xl text-center max-w-2xl mx-auto my-12"
    >
      <div
        class="bg-gray-700/50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          class="w-10 h-10 text-gray-400"
        >
          <path
            fill-rule="evenodd"
            d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <h3 class="text-2xl font-bold mb-3">No se encontraron resultados</h3>
      <p class="text-gray-400 mb-6">
        No encontramos películas que coincidan con "{{ searchQuery }}"
      </p>
      <div class="text-sm text-gray-400 max-w-md mx-auto">
        <p class="mb-2">Sugerencias:</p>
        <ul class="list-disc list-inside text-left">
          <li>Verifica que todas las palabras estén escritas correctamente</li>
          <li>Intenta usar términos más generales</li>
          <li>Prueba con palabras clave diferentes</li>
        </ul>
      </div>
    </div>
    }

    <!-- Back to Home -->
    <div class="flex justify-center mt-12 cursor-pointer">
      <a
        (click)="homePage()"
        class="flex items-center gap-2 bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-lg transition-colors"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          class="w-5 h-5"
        >
          <path
            fill-rule="evenodd"
            d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z"
            clip-rule="evenodd"
          />
        </svg>
        Volver al inicio
      </a>
    </div>
  </div>

  <!-- Footer -->
  <footer
    class="bg-black/50 backdrop-blur-sm py-8 border-t border-gray-800 mt-auto"
  >
    <div class="container mx-auto px-4 text-center text-gray-400">
      <p>
        © {{ currentYear }} Catálogo de Películas. Todos los derechos
        reservados.
      </p>
      <p class="mt-2 text-sm">
        Datos proporcionados por The Movie Database (TMDb).
      </p>
    </div>
  </footer>
</div>
